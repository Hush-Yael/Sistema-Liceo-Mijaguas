<div x-show="acciones_abiertas" aria-label="acciones" class="acciones">
  <span id="cantidad" role="status">
    <span x-text="seleccion.size"></span> seleccionados
  </span>

  <button aria-label="Cancelar selección" @click="alternar_abiertas()">
    <svg
      fill="currentColor"
      stroke-width="0"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 512 512"
    >
      <path
        d="m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34Z"
      ></path>
    </svg>
  </button>

  <button
    class="btn"
    aria-label="Seleccionar todo"
    @click="
    const todos = document.getElementById('lista-objetos').querySelectorAll('[data-id]');
    const cantidad = seleccion.size
    seleccion.clear()
    if (cantidad === todos.length) return;

    todos.forEach(obj => {
      seleccion.add(obj.getAttribute('data-id'))
    })
  "
  >
    <svg
      fill="none"
      stroke-width="2"
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path
        d="M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"
      ></path>
      <path d="M12 20v.01"></path>
      <path d="M16 20v.01"></path>
      <path d="M8 20v.01"></path>
      <path d="M4 20v.01"></path>
      <path d="M4 16v.01"></path>
      <path d="M4 12v.01"></path>
      <path d="M4 8v.01"></path>
      <path d="M4 4v.01"></path>
      <path d="M8 4v.01"></path>
      <path d="M12 4v.01"></path>
      <path d="M16 4v.01"></path>
      <path d="M20 4v.01"></path>
      <path d="M20 8v.01"></path>
      <path d="M20 12v.01"></path>
      <path d="M20 16v.01"></path>
      <path d="M20 20v.01"></path>
    </svg>
  </button>

  {% if puede_eliminar %}
    <button
      class="btn"
      aria-label="Eliminar"
      hx-confirm="¿Realmente deseas eliminar los objetos seleccionados? Todos sus elementos relacionados también serán eliminados."
      hx-delete="{% url 'vista_pestaña_admin_completa' %}"
      hx-indicator="#pestaña-indicador"
      hx-target="#contenido"
      hx-swap="innerHTML"
      hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
      hx-vals='js:{"pestaña": "{{ pestaña }}", "seleccion": Array.from(document.querySelector("[x-data]")._x_dataStack[0].seleccion) }'
      :disabled="seleccion.size < 1"
    >
      <svg
        fill="currentColor"
        stroke-width="0"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 16 16"
        height="20"
        width="20"
      >
        <path
          d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"
        ></path>
      </svg>
    </button>
  {% endif %}

  {% if puede_editar %}
    <button
      :disabled="seleccion.size !== 1"
      class="btn"
      aria-label="Editar"
      hx-get="{% url 'obtener_form_editar_pestaña' %}"
      hx-target=".campos"
      hx-swap="innerHTML"
      hx-indicator="#indicador-carga-form"
      hx-vals='js:{"pestaña": "{{ pestaña }}", "objeto_id": document.querySelector("[x-data]")._x_dataStack[0].seleccion.values().next().value }'
      onclick="mostrarModal()"
    >
      <svg
        fill="none"
        stroke-width="2"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path
          d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"
        ></path>
        <path
          d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"
        ></path>
        <path d="M16 5l3 3"></path>
      </svg>
    </button>
  {% endif %}
</div>
