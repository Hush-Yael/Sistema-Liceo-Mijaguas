{% extends "base.html" %}

{% block titulo %}
  Iniciar Sesión
{% endblock %}
{% load static %}
{% load widget_tweaks %}

{% block cabeza %}
  <link rel="stylesheet" href="{% static 'css/componentes/alerta.css' %}" />
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (window.location.search.includes("next="))
        document.querySelector("input[name=next]").value =
          window.location.search.split("next=")[1];
    });
  </script>
{% endblock %}

{% block contenido %}
  <main class="flex-1 col fc gap-y-4">
    <img
      id="logo-claro"
      class="dark:hidden size-200px m-[0_auto]"
      src="{% static 'img/logo-letras-negras.png' %}"
      alt="logo"
    />
    <img
      id="logo-oscuro"
      class="hidden dark:block size-200px m-[0_auto]"
      src="{% static 'img/logo-letras-blancas.png' %}"
      alt="logo"
    />

    <form
      class="caja max-w-350px w-90% p-4"
      action="{% url 'login' %}"
      method="post"
    >
      {% csrf_token %}

      <h1 class="text-[1.5rem] font-bold tac mb-4">Iniciar sesión</h1>

      <div class="col gap-y-4">
        {% for field in form %}
          <div class="col gap-y-1.5">
            {{ field.label_tag }}
            {% render_field field class="elevado-2" %}
          </div>
        {% endfor %}
      </div>

      <button class="btn-primario btn-md w-full mt-[1.75rem]">Ingresar</button>

      <input type="hidden" name="next" value="/" />
    </form>

    {% if form.errors %}
      {% with mensaje_alerta="Los datos ingresados no son correctos" %}
        {% include "componentes/alerta.html" %}
      {% endwith %}
    {% endif %}
  </main>
{% endblock %}
