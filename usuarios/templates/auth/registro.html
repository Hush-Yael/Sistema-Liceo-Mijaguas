{% extends "auth/form.html" %}
{% load grupos_variantes %}
{% load static %}

{% block cabeza %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'css/componentes/dialog.css' %}" />
  <script defer src="{% static 'js/alpine-dialog.min.js' %}"></script>
  <script defer src="{% static 'js/componentes/campo-foto.js' %}"></script>
{% endblock cabeza %}

{% block form_attrs %}
  enctype="multipart/form-data"
{% endblock form_attrs %}

{% block titulo %}
  Registro
{% endblock titulo %}

{% block contenido %}
  {% with titulo="Registro" form_class="max-w-[500px]! w-95%!" %}
    {{ block.super }}
  {% endwith %}
{% endblock %}

{% block logo %}
{% endblock logo %}

{% block icono %}
  <svg class="m-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
    <path
      d="M144 128a80 80 0 1 1 160 0 80 80 0 1 1-160 0zm208 0a128 128 0 1 0-256 0 128 128 0 1 0 256 0zM48 480c0-70.7 57.3-128 128-128h96c70.7 0 128 57.3 128 128v8c0 13.3 10.7 24 24 24s24-10.7 24-24v-8c0-97.2-78.8-176-176-176h-96C78.8 304 0 382.8 0 480v8c0 13.3 10.7 24 24 24s24-10.7 24-24v-8z"
    ></path>
  </svg>
{% endblock icono %}

{% block campos %}
  {% for campo in form %}
    {% if campo == form.foto_perfil %}

    {% elif campo != form.username %}
      {% include "componentes/campo.html" with input_class="ui-elevado-2" %}
    {% else %}
      <div class="flex items-start gap-y-6 gap-x-4 min-[500px]:gap-x-6">
        {% include "componentes/campo.html" with class="flex-1" input_class="deshabilitar-al-subir ui-elevado-2" %}

        {%
          with
          class="relative"
          img_class="size-18 size-min-18 lh-18 min-[500px]:(size-20 size-min-20 lh-20)"|expandir_variantes
          campo=form.foto_perfil
          error_class="absolute bottom-full mb-3 right-0 mr-6 p-1 px-2 w-max max-w-60vw rounded bg-peligro text-peligro-texto! animate-(bounce duration-700 count-[2] fill-forwards) before:(absolute -z-1 top-90% right-1 content-[''] size-4 bg-peligro border-peligro border-t border-l -transform-translate-y-1/2 transform-rotate-45) max-[500px]:text-xs"|expandir_variantes
        %}
          {% if campo.value %}
            {% with src=campo.value %}
              {% include "componentes/foto/img.html" %}
            {% endwith %}
          {% else %}
            {% include "componentes/foto/img.html" %}
          {% endif %}
        {% endwith %}
      </div>
    {% endif %}
  {% endfor %}
{% endblock campos %}

{% block acciones %}
  <div class="col gap-y-3">
    <button class="ui-btn ui-btn/primario ui-btn/md w-full mt-[1.75rem]">
      Registrarme
    </button>

    <div class="tac text-texto-sutil">
      ¿Ya tienes una cuenta?
      <a
        class="underline underline-offset-2 text-secundario-300 dark:text-secundario-800 pover:decoration-2 cursor-pointer"
        href="{% url 'login' %}"
      >
        Inicia sesión
      </a>
    </div>
  </div>
{% endblock acciones %}
